{%- comment -%}
  Questionnaire Page Template
  Displays RevenueHunt questionnaire for products requiring it
{%- endcomment -%}

{{ 'questionnaire-styles.css' | asset_url | stylesheet_tag }}

<div class="questionnaire-page-container">
  <div class="questionnaire-header">
    <h1>Medical Questionnaire</h1>
    <p>Please complete the questionnaire below to proceed with your purchase.</p>
  </div>

  <div id="questionnaire-result" style="display: none;"></div>

  <div class="questionnaire-content" id="questionnaire-content">
    <div class="questionnaire-loading">
      <p>Loading questionnaire</p>
    </div>
  </div>

  <div class="questionnaire-footer">
    <p>
      Your information is secure and will only be used for medical consultation purposes.
    </p>
  </div>
</div>

<script>
  // Initialize questionnaire when page loads
  document.addEventListener('DOMContentLoaded', function() {
    const urlParams = new URLSearchParams(window.location.search);
    const quizId = urlParams.get('quiz');
    const productId = urlParams.get('product');
    
    if (quizId && productId) {
      // RevenueHunt v2 will handle the quiz display via hash
      // The questionnaire-integration.js will handle the completion
      console.log('Questionnaire initialized for product:', productId, 'Quiz:', quizId);
    } else {
      const contentDiv = document.getElementById('questionnaire-content');
      if (contentDiv) {
        contentDiv.innerHTML = '<div class="message error">Invalid questionnaire link. Please return to the product page.</div>';
      }
    }
  });
</script>

